# 接口

------

Go语言中接口类型的独特之处在于它是满足隐式实现的。也就是说，我们没有必要对于给定的具体类型定义所有满足的接口类型；简单地拥有一些必需的方法就足够了。

这种设计可以让你创建一个新的接口类型满足已经存在的具体类型却不会去改变这些类型的定义；当我们使用的类型来自于不受我们控制的包时这种设计尤其有用。

接口类型是对其它类型行为的抽象和概括；因为接口类型不会和特定的实现细节绑定在一起，通过这种抽象的方式我们可以让我们的函数更加灵活和更具有适应能力。

接口是双方约定的一种合作协议。接口实现者不需要关心接口会被怎样使用，调用者也不需要关心接口的实现细节。接口是一种类型，也是一种抽象结构，不会暴露所含数据的格式、类型及结构。

##### 接口声明

1. 接口声明的格式

   ```golang
   //接口在命名时，一般会在单词后面添加 er，如有写操作的接口叫 Writer，有字符串功能的接口叫 Stringer，有关闭功能的接口叫Closer等。
   type 接口类型名 interface{
       方法名1( 参数列表1 ) 返回值列表1
       方法名2( 参数列表2 ) 返回值列表2
       …
   }
   ```

2. 开发中常见的接口和写法

   ```go
   //io 包中提供的 Writer 接口
   //调用 Write()方法写入一个字节数组([]byte），返回值告知写入字节数（n int）和可能发生的错误（err error）
   type Writer interface {
       Write(p []byte) (n int, err error)
   }
   ```

##### 实现接口的条件

如果一个任意类型 T 的方法集为一个接口类型的方法集的超集，则我们说类型 T 实现了此接口类型。T 可以是一个非接口类型，也可以是一个接口类型。

实现关系在Go语言中是隐式的。两个类型之间的实现关系不需要在代码中显式地表示出来。Go语言中没有类似于 implements 的关键字。 Go编译器将自动在需要的时候检查两个类型之间的实现关系。

接口定义后，需要实现接口，调用方才能正确编译通过并使用接口。接口的实现需要遵循两条规则才能让接口可用

1. 接口的方法与实现接口的类型方法格式一致
2. 接口中的所有方法均被实现

##### 类型与接口的关系

类型和接口之间有一对多和多对一的关系

1. 一个类型实现多个接口
   - 一个类型可以同时实现多个接口，而接口间彼此独立，不知道对方的实现
2. 多个类型实现相同的接口
   - 一个接口的方法，不一定需要由一个类型完全实现，接口的方法可以通过在类型中嵌入其他类型或者结构体来实现。也就是说，使用者并不关心某个接口的方法是通过一个类型完全实现的，还是通过多个结构嵌入到一个结构体中拼凑起来共同实现的。

##### 接口的nil判断

nil 在 Go语言中只能被赋值给指针和接口。接口在底层的实现有两个部分：type 和 data。在源码中，显式地将 nil 赋值给接口时，接口的 type 和 data 都将为 nil。此时，接口与 nil 值判断是相等的。但如果将一个带有类型的 nil 赋值给接口时，只有 data 为 nil，而 type 为 nil，此时，接口与 nil 判断将不相等。

##### 类型断言简述

##### 排序(sort.interface)

##### 接口的嵌套组合

##### 接口与类型之间的转换

##### Go语言类型分支（switch判断空接口中变量的类型）

##### error接口:返回错误信息



